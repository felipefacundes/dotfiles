#!/bin/bash
sudo su -c "echo -e 'vm.swappiness=10' > /etc/sysctl.conf"
sudo su -c "echo -e 'net.ipv4.conf.all.rp_filter=1' >> /etc/sysctl.conf"
sudo su -c "echo -e 'net.ipv4.tcp_syncookies=1' >> /etc/sysctl.conf"
sudo su -c "echo -e 'net.ipv4.ip_forward=1' >> /etc/sysctl.conf"
sudo su -c "echo -e 'net.ipv4.tcp_dsack=0' >> /etc/sysctl.conf"
sudo su -c "echo -e 'net.ipv4.tcp_sack=0' >> /etc/sysctl.conf"
sudo su -c "echo -e 'fs.file-max=100000' >> /etc/sysctl.conf"
sudo su -c "echo -e 'kernel.sched_migration_cost_ns=5000000' >> /etc/sysctl.conf"
sudo su -c "echo -e 'kernel.sched_autogroup_enabled=0' >> /etc/sysctl.conf"
sudo su -c "echo -e 'vm.dirty_background_bytes=16777216' >> /etc/sysctl.conf"
sudo su -c "echo -e 'vm.dirty_bytes=50331648' >> /etc/sysctl.conf"
sudo su -c "echo -e 'kernel.pid_max=4194304' >> /etc/sysctl.conf"
sudo su -c "echo -e 'vm.oom_kill_allocating_task=1' >> /etc/sysctl.conf"

sudo su -c "echo -e 'hard stack unlimited' > /etc/security/limits.conf"
sudo su -c "echo -e 'nproc unlimited' >> /etc/security/limits.conf"
sudo su -c "echo -e 'nofile 1048576' >> /etc/security/limits.conf"
sudo su -c "echo -e 'memlock unlimited' >> /etc/security/limits.conf"
sudo su -c "echo -e 'as unlimited' >> /etc/security/limits.conf"
sudo su -c "echo -e 'cpu unlimited' >> /etc/security/limits.conf"
sudo su -c "echo -e 'fsize unlimited' >> /etc/security/limits.conf"
sudo su -c "echo -e 'memlock unlimited' >> /etc/security/limits.conf"
sudo su -c "echo -e 'msgqueue unlimited' >> /etc/security/limits.conf"
sudo su -c "echo -e 'locks unlimited' >> /etc/security/limits.conf"
sudo su -c "echo -e '* hard nofile 1048576' >> /etc/security/limits.conf"
